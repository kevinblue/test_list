/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.56
 * Generated at: 2017-05-24 07:35:36 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.jsps.solutions.permission;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class userDataPermission_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n");
      out.write("<title>用户权限分配</title>\r\n");
      out.write("    <!--css sheet-->\r\n");
      out.write("\t<link href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/css/dtree/dtree.css\" rel=\"stylesheet\" type=\"text/css\">\r\n");
      out.write("\t<link href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/css/jquery-easyui/easyui.css\" rel=\"stylesheet\" type=\"text/css\">\r\n");
      out.write("\t<link href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/css/jquery-easyui/icon.css\" rel=\"stylesheet\" type=\"text/css\">\r\n");
      out.write("\t<link href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/css/tracywindy/tracywindy.css\" rel=\"stylesheet\" type=\"text/css\">\r\n");
      out.write("\t<link href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/css/tracywindy/button.css\" rel=\"stylesheet\" type=\"text/css\">\r\n");
      out.write("\t\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/tracywindy/tracywindyUtils.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/tracywindy/tracywindyJsonUtil.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/tracywindy/tracywindyAjax.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/jquery/jquery.min.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/jquery/jquery.easyui.min.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/jquery/easyui-lang-zh_CN.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/tracywindy/tracywindyLoadMask.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/tracywindy/tracywindyTable.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/tracywindy/tracywindyComboBox.js\"></script>\r\n");
      out.write("\t\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/tracywindy/workFlowUtil.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/tracywindy/tracywindySerializeFormToJsonObject.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/validator.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/dtree/dtree.js\"></script>\r\n");
      out.write("    <style type=\"text/css\">\r\n");
      out.write("\t   html,body{\r\n");
      out.write("\t     overflow:hidden;\r\n");
      out.write("\t   }\r\n");
      out.write("\t</style>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\tvar pageWidth  = document.documentElement.clientWidth;\r\n");
      out.write("\tvar pageHeight = document.documentElement.clientHeight-10;\r\n");
      out.write("\tvar loadMask = null;\r\n");
      out.write("\tjQuery(function(){\r\n");
      out.write("\t\tif(null == loadMask){\r\n");
      out.write("\t\t\tloadMask = new tracywindyLoadMask(document.body,\"数据加载中 请稍后...\");\r\n");
      out.write("\t    }\r\n");
      out.write("   });\r\n");
      out.write("</script>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\tvar pageWidth  = document.documentElement.clientWidth;\r\n");
      out.write("\tvar pageHeight = document.documentElement.clientHeight-10;\r\n");
      out.write("\tvar loadMask = null;\r\n");
      out.write("\tjQuery(function(){\r\n");
      out.write("\t\tif(null == loadMask){\r\n");
      out.write("\t\t\tloadMask = new tracywindyLoadMask(document.body,\"数据加载中 请稍后...\");\r\n");
      out.write("\t    }\r\n");
      out.write("\t\tloadMask.show();\r\n");
      out.write("\t\treloadInitTree();\r\n");
      out.write("\t\t//loadMask.hide();\r\n");
      out.write("   });\r\n");
      out.write("   var currentCheckedNode = null;\r\n");
      out.write("   var isDeptRoleLoaded = false;\r\n");
      out.write("   var isGroupLoaded = false;\r\n");
      out.write("   function reloadInitTree(){\r\n");
      out.write("\t   isDeptRoleLoaded = false;\r\n");
      out.write("\t    //加载树形\r\n");
      out.write("\t\t$('#id_menu_main_content_div').tree({\r\n");
      out.write("\t\t\turl:'");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/table/getUserDeptAllTreeData.action',\r\n");
      out.write("\t\t\tcheckbox:false,\r\n");
      out.write("\t\t\tonLoadSuccess:function(a,b){\r\n");
      out.write("\t\t\t\tisDeptRoleLoaded = true;\r\n");
      out.write("\t\t\t\t\tloadMask.hide();\r\n");
      out.write("\t       },\r\n");
      out.write("\t\t\tonBeforeLoad:function(node,params){\r\n");
      out.write("\t    \t    loadMask.show();\r\n");
      out.write("\t\t\t\tparams['pid']  = node ? node.id : \"0\";\r\n");
      out.write("\t\t\t\tif(!node){\r\n");
      out.write("\t\t\t\t\tparams['init'] = true; \r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t    },onClick:function(node){\r\n");
      out.write("\t\t       clearDataPermissioin();\r\n");
      out.write("\t\t       if(\"deptRole\"==node.attributes['type']){\r\n");
      out.write("\t\t    \t   loadUserDataPermissioin(node.id);\r\n");
      out.write("\t\t       }\r\n");
      out.write("\t\t    }\r\n");
      out.write("\t\t});\r\n");
      out.write("   }\r\n");
      out.write("   function clearDataPermissioin(){\r\n");
      out.write("\t   $(\"#id_deptrole\").val(\"\");\r\n");
      out.write("\t   getTracywindyObject(\"id_combo_id_mayviewtype\").setValue(\"\");\r\n");
      out.write("\t   $(\"#id_deptrole\").val(\"\");\r\n");
      out.write("\t   $(\"#id_column\").val(\"\");\r\n");
      out.write("\t   $(\"#id_wordmemo\").val(\"\");\r\n");
      out.write("   }\r\n");
      out.write("   function loadUserDataPermissioin(id){\r\n");
      out.write("\t   loadMask.show();\r\n");
      out.write("\t   var deptroleid=id;\r\n");
      out.write("\t   ajaxRequest({\r\n");
      out.write("\t\t\turl:\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/table/getTableData.action\",\r\n");
      out.write("\t\t\tasync:true,\r\n");
      out.write("\t\t\tsuccess:function(response) { \r\n");
      out.write("\t\t\t\tvar rt =response.responseText;\r\n");
      out.write("\t\t\t\tvar jsonData = JsonUtil.decode(rt);\r\n");
      out.write("\t\t\t\tvar datas = jsonData.datas;\r\n");
      out.write("\t\t\t\tif(datas.length>0){\r\n");
      out.write("\t\t\t\t\t getTracywindyObject(\"id_combo_id_mayviewtype\").setValue(datas[0].mayviewtype);\r\n");
      out.write("\t\t\t\t\t $(\"#id_wordmemo\").val(datas[0].memo);\r\n");
      out.write("\t\t\t\t\t $(\"#id_column\").val(datas[0].condtioncolumn);\t\t\t\t \r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\t$(\"#id_deptrole\").val(deptroleid);\r\n");
      out.write("\t\t\t\tloadMask.hide();\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\tfailure:function(response){ },\r\n");
      out.write("\t\t\tparams:{\r\n");
      out.write("\t\t\t\txmlFileName:'combos/comboDeptRoleDataPermission.xml',\r\n");
      out.write("\t\t\t    deptroleid:id\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\t\r\n");
      out.write("   }\r\n");
      out.write("   function saveUserDataPermissioin(){\r\n");
      out.write("\t   loadMask.show();\r\n");
      out.write("\t   var params={};\r\n");
      out.write("\t   params[\"deptrole\"]= $(\"#id_deptrole\").val()||\"\";\r\n");
      out.write("\t   params[\"mayviewtype\"]=getTracywindyObject(\"id_combo_id_mayviewtype\").getValue()||\"\";\r\n");
      out.write("\t   params[\"memo\"]= $(\"#id_wordmemo\").val();\r\n");
      out.write("\t   params[\"condtioncolumn\"]=$(\"#id_column\").val();\r\n");
      out.write("\t   if(params[\"deptrole\"]==\"\"){alert(\"请选择部门下的角色\");loadMask.hide();return false;};\r\n");
      out.write("\t   if(params[\"mayviewtype\"]==\"\"){alert(\"请选择访问类型\");loadMask.hide();return false;};\r\n");
      out.write("\t   ajaxRequest({\r\n");
      out.write("\t\t\turl:\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/table/savaUserDataPermissionData.action\",\r\n");
      out.write("\t\t\tasync:true,\r\n");
      out.write("\t\t\tsuccess:function(response) { \r\n");
      out.write("\t\t\t\talert(\"配置成功\")\r\n");
      out.write("\t\t\t\tloadMask.hide();\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\tfailure:function(response){ },\r\n");
      out.write("\t\t\tparams:params\r\n");
      out.write("\t\t});\t\r\n");
      out.write("   }\r\n");
      out.write("</script>\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      out.write("\t<div id='menu_main_oper' style=\"overflow:hidden;float:left;border-bottom:1px solid #DDD;padding:5px;\">\r\n");
      out.write("\t   <div class=\"panel-title\" ><font color=\"red\" class=\"flagUserSelectContainer\"></font>&nbsp;&nbsp;部门角色</div>\r\n");
      out.write("\t   <div id='id_menu_main_content_div' style=\"border:1px solid #DDD;border-top:0px;overflow:auto;padding:5px;\"></div>\r\n");
      out.write("\t</div>\r\n");
      out.write("\t<div id='menu_main_oper_right' style=\"overflow:hidden;float:left;border:1px solid #DDD;border-left:0px;border-top:0px;padding:5px;\">\r\n");
      out.write("\t   <div class=\"panel-title\" ><font color=\"red\" class=\"flagUserSelectContainer\"></font>&nbsp;&nbsp;数据权限\r\n");
      out.write("\t      <a  style=\"margin-left:20px;\" href=\"javascript:void(0);\" class=\"btn btn-primary\"onclick='saveUserDataPermissioin();'><span>保存</span></a>\r\n");
      out.write("\t   </div>\r\n");
      out.write("\t   <div id='id_menu_main_content_div_right' style=\"border:1px solid #DDD;border-top:0px;overflow:auto;padding:5px;\">\r\n");
      out.write("\t         <table style=\"width:100%;\" id=\"formDataConfig\">\r\n");
      out.write("\t\t\t        <tr><td>可访问类型</td><td><div id=\"id_mayviewtype\"></div></td></tr>\r\n");
      out.write("\t\t\t        <td>对应的字段</td><td><input style=\"width:100%\" name=\"condtioncolumn\" id=\"id_column\" value=\"\" ></td></tr>\r\n");
      out.write("\t\t\t        <tr><td>备注</td>\r\n");
      out.write("\t\t\t            <td>\r\n");
      out.write("\t\t\t               <textarea style=\"width:100%\" name=\"memo\" id=\"id_wordmemo\" class=\"td-content-input\"  value=\"\" ></textarea>\r\n");
      out.write("\t\t\t               <input style=\"width:100%\" name=\"deptrole\" id=\"id_deptrole\"  type=\"hidden\"  value=\"\" >\r\n");
      out.write("\t\t\t            </td>\r\n");
      out.write("\t\t\t        </tr>\r\n");
      out.write("\t        </table>\r\n");
      out.write("\t   </div>\r\n");
      out.write("\t</div>\r\n");
      out.write("\t<script type='text/javascript'>\r\n");
      out.write("\t    var heightAdd = -2;\r\n");
      out.write("\t    var widthAdd  = -358;\r\n");
      out.write("\t\tjQuery(\"#menu_main_content\").css(\"height\",(pageHeight+heightAdd)+\"px\");\r\n");
      out.write("\t\tjQuery(\"#id_menu_tabs_menu\").css(\"height\",(pageHeight+heightAdd-40)+\"px\");\r\n");
      out.write("\t\tjQuery(\"#id_menu_main_content_div\").css(\"height\",(pageHeight+heightAdd-40)+\"px\");\r\n");
      out.write("\t\tjQuery(\"#id_menu_main_content_div_right\").css(\"height\",(pageHeight+heightAdd-40)+\"px\");\r\n");
      out.write("\t\t\r\n");
      out.write("\t\tjQuery(\"#menu_main_oper\").css(\"height\",(pageHeight+heightAdd)+\"px\");\r\n");
      out.write("\t\tjQuery(\"#menu_main_oper_right\").css(\"height\",(pageHeight+heightAdd)+\"px\");\r\n");
      out.write("\t\tjQuery(\"#menu_main_oper\").css(\"width\",((pageWidth + widthAdd)/2 )+\"px\");\r\n");
      out.write("\t\tjQuery(\"#menu_main_oper_right\").css(\"width\",((pageWidth + widthAdd)/2 )+\"px\");\r\n");
      out.write("\t\t jQuery(function(){\r\n");
      out.write("\t\t\t dictOnSelect('id_mayviewtype','mayviewtype','mayviewtype','',function(combox){\r\n");
      out.write("\t\t\t\t var type=combox.getValue();\r\n");
      out.write("\t\t\t\t if(type==\"mayviewtype1\"){$(\"#id_column\").val(\"projmanage\");}\r\n");
      out.write("\t\t\t\t if(type==\"mayviewtype2\"){$(\"#id_column\").val(\"projdept\");}\r\n");
      out.write("\t\t\t\t if(type==\"mayviewtype3\"){$(\"#id_column\").val(\"projdept\");}\r\n");
      out.write("\t\t\t\t \r\n");
      out.write("\t\t\t },'');\r\n");
      out.write("\t\t });\r\n");
      out.write("\t</script>\r\n");
      out.write("</body>\r\n");
      out.write("</html>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
