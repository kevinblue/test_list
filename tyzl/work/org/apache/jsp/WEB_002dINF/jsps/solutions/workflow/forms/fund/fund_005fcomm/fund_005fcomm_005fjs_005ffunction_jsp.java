/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.56
 * Generated at: 2017-05-19 05:22:05 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.jsps.solutions.workflow.forms.fund.fund_005fcomm;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class fund_005fcomm_005fjs_005ffunction_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("//资金收款状态\r\n");
      out.write("function setfundIncomeState(row){\r\n");
      out.write("    var overmoney=row.overmoney;\r\n");
      out.write("    var planmoney=row.planmoney;\r\n");
      out.write("    overmoney=parseFloat(overmoney);\r\n");
      out.write("    overmoney=overmoney.toFixed(2);\r\n");
      out.write("    planmoney=parseFloat(planmoney);\r\n");
      out.write("    planmoney=planmoney.toFixed(2);\r\n");
      out.write("    var csate=\"\";\r\n");
      out.write("    if(parseFloat(overmoney)<0){\r\n");
      out.write("   \t csate= \"多收款\";\r\n");
      out.write("    }else if(parseFloat(overmoney)==0){\r\n");
      out.write("   \t csate= \"已收款\"; \r\n");
      out.write("    }else if(parseFloat(overmoney)<parseFloat(planmoney)){\r\n");
      out.write("   \t csate= \"部份收款\";\r\n");
      out.write("    }else{\r\n");
      out.write("   \t csate= \"未收款\";\r\n");
      out.write("    }\r\n");
      out.write("    return csate;   \r\n");
      out.write("}\r\n");
      out.write("//资金付款状态\r\n");
      out.write("function setfundPayState(row){\r\n");
      out.write("     var overmoney=row.overmoney;\r\n");
      out.write("     var planmoney=row.planmoney;\r\n");
      out.write("     overmoney=parseFloat(overmoney);\r\n");
      out.write("     overmoney=overmoney.toFixed(2);\r\n");
      out.write("     planmoney=parseFloat(planmoney);\r\n");
      out.write("     planmoney=planmoney.toFixed(2);\r\n");
      out.write("     var csate=\"\";\r\n");
      out.write("     if(parseFloat(overmoney)<0){\r\n");
      out.write("    \t csate= \"多付款\";\r\n");
      out.write("     }else if(parseFloat(overmoney)==0){\r\n");
      out.write("    \t csate= \"已付款\"; \r\n");
      out.write("     }else if(parseFloat(overmoney)<parseFloat(planmoney)){\r\n");
      out.write("    \t csate= \"部份付款\";\r\n");
      out.write("     }else{\r\n");
      out.write("    \t csate= \"未付款\";\r\n");
      out.write("     }\r\n");
      out.write("     return csate;  \r\n");
      out.write("}\r\n");
      out.write("//租金回笼状态\r\n");
      out.write("function showRentStatus(e){\r\n");
      out.write("    var curRowData=e.record;\r\n");
      out.write("\tif(curRowData.currentoverage == 0 && curRowData.penaltyoverage==0){\r\n");
      out.write("\t\treturn \"已回笼\";\r\n");
      out.write("\t}else if(curRowData.currentoverage ==curRowData.rent){\r\n");
      out.write("\t\treturn \"未回笼\";\r\n");
      out.write("\t}else{\r\n");
      out.write("\t\treturn \"部分回笼\";\r\n");
      out.write("\t}\r\n");
      out.write("}\r\n");
      out.write("//检查本次手续费、服务费、保证金投放金额不能大于余额\r\n");
      out.write("function checkFundPut(){\r\n");
      out.write("\t  var contractid=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${requestScope['contract_info.id'] }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\";\r\n");
      out.write("\t  var param={};\r\n");
      out.write("\t  param[\"contractid\"]=contractid;\r\n");
      out.write("\t  var flag=true;\r\n");
      out.write("\t  mini.mask({ el: document.body,cls: 'mini-mask-loading',html:'检查资金...'});\r\n");
      out.write("\t  ajaxRequest({\r\n");
      out.write("\t\t\turl : getRootPath() + \"/eleasing/getFundPutCheckInfo.acl\",\r\n");
      out.write("\t\t\tmethod : 'POST',\r\n");
      out.write("\t\t\tsuccess : function(rs) {\r\n");
      out.write("\t\t\t\tvar returnMessage = rs.responseText;\r\n");
      out.write("                var checkInfo=eval(\"(\"+returnMessage+\")\");\r\n");
      out.write("                if(checkInfo.result==\"0\"){\r\n");
      out.write("                       mini.alert(checkInfo.message);\r\n");
      out.write("                       flag=false;\r\n");
      out.write("                }else{\r\n");
      out.write("                \t var handlingchargemoney=$minigetinputtext(\"handlingchargemoney\");\r\n");
      out.write("                \t var managementmoney=$minigetinputtext(\"managementmoney\");\r\n");
      out.write("                \t var cautionmoney=$minigetinputtext(\"cautionmoney\");\r\n");
      out.write("                \t if(parseFloat(checkInfo.fund[0].handling_charge_money)<handlingchargemoney){\r\n");
      out.write("                \t\t mini.alert(\"服务费不能大于剩余投放的服务费！！！\");\r\n");
      out.write("                \t\t flag=false;\r\n");
      out.write("                \t }\r\n");
      out.write("                \t if(parseFloat(checkInfo.fund[0].management_money)<managementmoney){\r\n");
      out.write("                \t\t mini.alert(\"管理费不能大于剩余投放的管理费！！！\");\r\n");
      out.write("                \t\t flag=false;\r\n");
      out.write("                \t }\r\n");
      out.write("                \t if(parseFloat(checkInfo.fund[0].caution_money)<cautionmoney){\r\n");
      out.write("                \t\t mini.alert(\"风险金不能大于剩余投放的风险金！！！\");\r\n");
      out.write("                \t\t flag=false;\r\n");
      out.write("                \t }\r\n");
      out.write("                }\r\n");
      out.write("\t\t\t\tmini.unmask(document.body);\r\n");
      out.write("\t  },\r\n");
      out.write("\t\tasync : false,\r\n");
      out.write("\t\tfailure : function(res) {\r\n");
      out.write("\t\t  mini.unmask(document.body);\r\n");
      out.write("\t\t},\r\n");
      out.write("\t\tparams :param\r\n");
      out.write("\t});\r\n");
      out.write("\treturn flag;  \r\n");
      out.write("} \r\n");
      out.write("\r\n");
      out.write("//检查资金实收或付款是否大于资金的余额，如果有网银则再检查网银\r\n");
      out.write("function checkFundFundCharge(tableid){\r\n");
      out.write("\t \r\n");
      out.write("\t   var ebankid=\"\";\r\n");
      out.write("\t   if(mini.get(\"ebdataid\")){\r\n");
      out.write("\t\t   ebankid=mini.get(\"ebdataid\").getValue();\r\n");
      out.write("\t   }\r\n");
      out.write("\t   var flowunid=flowUnid;\r\n");
      out.write("\t   var chargeTable=mini.get(tableid);\r\n");
      out.write("\t   var chargeData=chargeTable.getData();\r\n");
      out.write("\t   var ids=[]; \r\n");
      out.write("\t   for(var i=0;i<chargeData.length;i++){\r\n");
      out.write("\t     ids.push(\"'\"+chargeData[i].fundfundchargeplan+\"'\");\r\n");
      out.write("\t  }\r\n");
      out.write("\t  var param={};\r\n");
      out.write("\t  var cflag=true;\r\n");
      out.write("\t  if(ebankid!=\"\"){param[\"ebankid\"]=ebankid;}\r\n");
      out.write("\t  param[\"fundplandids\"]=ids.join(\",\");\r\n");
      out.write("\t  param[\"flowunid\"]=flowunid;\r\n");
      out.write("\t  var temptableid=tableid;\r\n");
      out.write("\t  if(ids.length>0){\r\n");
      out.write("\t\t  mini.mask({ el: document.body,cls: 'mini-mask-loading',html:'检查资金...'});\r\n");
      out.write("\t\t  ajaxRequest({\r\n");
      out.write("\t\t\t\turl : getRootPath() + \"/eleasing/getFundCheckInfo.acl\",\r\n");
      out.write("\t\t\t\tmethod : 'POST',\r\n");
      out.write("\t\t\t\tsuccess : function(rs) {\r\n");
      out.write("\t\t\t\t\tvar returnMessage = rs.responseText;\r\n");
      out.write("\t                var checkInfo=eval(\"(\"+returnMessage+\")\");\r\n");
      out.write("\t                if(checkInfo.result==\"0\"){\r\n");
      out.write("\t                       mini.alert(checkInfo.message);\r\n");
      out.write("\t                       cflag= false;\r\n");
      out.write("\t                }else{\r\n");
      out.write("\t                     var allsum=0;\r\n");
      out.write("\t                     for(var i=0;i<chargeData.length;i++){\r\n");
      out.write("\t                          allsum=parseFloat(allsum)+parseFloat(chargeData[i].factmoney);\r\n");
      out.write("\t                          allsum=allsum.toFixed(2);\r\n");
      out.write("\t                          for(var j=0;j<checkInfo.fund.length;j++){\r\n");
      out.write("\t                               if(chargeData[i].fundfundchargeplan==checkInfo.fund[j].id){\r\n");
      out.write("\t                                   var tempvalue=parseFloat(checkInfo.fund[j].overmoney)-parseFloat(chargeData[i].factmoney);\r\n");
      out.write("\t                                   tempvalue=tempvalue.toFixed(2); \t                                   \r\n");
      out.write("\t                            \t   if(parseFloat(tempvalue)<0){\r\n");
      out.write("\t                                       mini.alert(chargeData[i].feetypename+\"第\"+chargeData[i].paymentid+\"笔(\"+chargeData[i].factmoney+\")大于计划余额(\"+ checkInfo.fund[j].overmoney+\")\");\r\n");
      out.write("\t                                       checkInfo.fund[j].overmoney=tempvalue;\r\n");
      out.write("\t                                       cflag= false;\r\n");
      out.write("\t                                   }else{\r\n");
      out.write("\t                                \t   checkInfo.fund[j].overmoney=tempvalue;\r\n");
      out.write("\t\t                                }\r\n");
      out.write("\t                               }\r\n");
      out.write("\t                          }\r\n");
      out.write("\t                     }\r\n");
      out.write("\t                     if(checkInfo.ebank.length>0){\r\n");
      out.write("\t                           var mayopemoney=checkInfo.ebank[0].mayopemoney;\r\n");
      out.write("\t                           mayopemoney=parseFloat(mayopemoney);\r\n");
      out.write("\t                           mayopemoney=mayopemoney.toFixed(2);\r\n");
      out.write("\t                           if(allsum>parseFloat(mayopemoney)){\r\n");
      out.write("\t                        \t   mini.alert(\"本次核销金额\"+allsum+\"大于网银中的可核销金额\"+mayopemoney);\r\n");
      out.write("\t                        \t   cflag= false;\r\n");
      out.write("\t                           }\r\n");
      out.write("\t                     }\r\n");
      out.write("\t                }\r\n");
      out.write("\t\t\t\t\tmini.unmask(document.body);\r\n");
      out.write("\t\t  },\r\n");
      out.write("\t\t\tasync : false,\r\n");
      out.write("\t\t\tfailure : function(res) {\r\n");
      out.write("\t\t\t  mini.unmask(document.body);\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\tparams :param\r\n");
      out.write("\t\t});\r\n");
      out.write("\t  }else{\r\n");
      out.write("\t     mini.alert(\"没有要校验的资金实收或实付\");\r\n");
      out.write("\t     cflag= false;\r\n");
      out.write("\t  }\t\r\n");
      out.write("\t  return cflag;\r\n");
      out.write("} \r\n");
      out.write("\r\n");
      out.write("function compareTwoField(valueone,valuetwo){\r\n");
      out.write("\tif(isNaN(valueone)){valueone=0;}\r\n");
      out.write("\tif(isNaN(valuetwo)){valuetwo=0;}\r\n");
      out.write("\tvalueone=parseFloat(valueone).toFixed(2);\r\n");
      out.write("\tvaluetwo=parseFloat(valuetwo).toFixed(2);\r\n");
      out.write("\tif(parseFloat(valueone)>parseFloat(valuetwo)){\r\n");
      out.write("        return true;\r\n");
      out.write("\t}else{\r\n");
      out.write("        return false;\r\n");
      out.write("\t}\r\n");
      out.write("}\r\n");
      out.write("//根据网银的余额进行核销\r\n");
      out.write("function calculatePlanRent(allMoney, corpus, interest, penalty) {\r\n");
      out.write("\tvar rentlist = {};\r\n");
      out.write("\t//核销租息\r\n");
      out.write("\tif (allMoney > 0) {\r\n");
      out.write("\t\tif (allMoney - interest >= 0) {\r\n");
      out.write("\t\t\tallMoney = parseFloat(allMoney) - parseFloat(interest);\r\n");
      out.write("\t\t\tallMoney=allMoney.toFixed(2);\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\tinterest = allMoney;\r\n");
      out.write("\t\t\tallMoney = 0;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t} else {\r\n");
      out.write("\t\tinterest = 0;\r\n");
      out.write("\t}\r\n");
      out.write("\t//核销本金\r\n");
      out.write("\tif (allMoney > 0) {\r\n");
      out.write("\t\tif (allMoney - corpus >= 0) {\r\n");
      out.write("\t\t\tallMoney = parseFloat(allMoney) - parseFloat(corpus);\r\n");
      out.write("\t\t\tallMoney=allMoney.toFixed(2);\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\tcorpus = allMoney;\r\n");
      out.write("\t\t\tallMoney = 0;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t} else {\r\n");
      out.write("\t\tcorpus = 0;\r\n");
      out.write("\t}\r\n");
      out.write("\t//核销罚息\r\n");
      out.write("\tif (allMoney > 0) {\r\n");
      out.write("\t\tif (allMoney - penalty >= 0) {\r\n");
      out.write("\t\t\tallMoney = parseFloat(allMoney) - parseFloat(penalty);\r\n");
      out.write("\t\t\tallMoney=allMoney.toFixed(2);\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\tpenalty = allMoney;\r\n");
      out.write("\t\t\tallMoney = 0;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t} else {\r\n");
      out.write("\t\tpenalty = 0;\r\n");
      out.write("\t}\r\n");
      out.write("\tvar rent = parseFloat(interest) + parseFloat(corpus);\r\n");
      out.write("\trentlist.rent = parseFloat(rent).toFixed(2);\r\n");
      out.write("\trentlist.corpus = parseFloat(corpus).toFixed(2);\r\n");
      out.write("\trentlist.interest = parseFloat(interest).toFixed(2);\r\n");
      out.write("\trentlist.penalty = parseFloat(penalty).toFixed(2);\r\n");
      out.write("\trentlist.lastMoney = parseFloat(allMoney).toFixed(2);\r\n");
      out.write("\treturn rentlist;\r\n");
      out.write("}\r\n");
      out.write("//检验租金计划是否已添加\r\n");
      out.write("function isExisted(currTable, rentlist){\r\n");
      out.write("\t\r\n");
      out.write("\tvar currRowDatas = currTable.getData();\r\n");
      out.write("\tif(currRowDatas.length==0){return false;}\r\n");
      out.write("\tfor(var i = 0;i < currRowDatas.length; i++){\r\n");
      out.write("\t\tif(parseFloat(rentlist) == parseFloat(currRowDatas[i].planlist)){\r\n");
      out.write("\t\t\treturn true;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\treturn false;\r\n");
      out.write("}\r\n");
      out.write("//获取核销次数\r\n");
      out.write("function getHireList(rentlist){\r\n");
      out.write("\tvar hireList = 0;\r\n");
      out.write("\tvar hisTableData = mini.get(\"rent_income_his\").getData();\r\n");
      out.write("\tvar hisLen = hisTableData.length;\r\n");
      out.write("\tfor(var i = 0;i < hisLen; i ++){\r\n");
      out.write("\t\tif(hisTableData[i].plan_list == rentlist){\r\n");
      out.write("\t\t\tif(hireList < hisTableData[i].hire_list){\r\n");
      out.write("\t\t\t\thireList = hisTableData[i].hire_list;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\treturn parseInt(hireList) + 1;\r\n");
      out.write("}\r\n");
      out.write("//检查租金实收\r\n");
      out.write("function checkFundRentIncome(tableid){\r\n");
      out.write("\t \r\n");
      out.write("\t   var ebankid=\"\";\r\n");
      out.write("\t   var plandate=\"\";\r\n");
      out.write("\t   var param={};\r\n");
      out.write("\t   if(mini.get(\"fund_ebank_data.id\")){\r\n");
      out.write("\t\t   ebankid=mini.get(\"fund_ebank_data.id\").getValue();\r\n");
      out.write("\t\t   plandate=mini.get(\"fund_ebank_data.factdate\").getValue();\r\n");
      out.write("\t\t   param[\"ebankid\"]=ebankid;\r\n");
      out.write("\t\t   param[\"plan_date\"]=plandate;\r\n");
      out.write("\t   }\r\n");
      out.write("\t   var flowunid=flowUnid;\r\n");
      out.write("\t   var chargeTable=mini.get(tableid);\r\n");
      out.write("\t   var chargeData=chargeTable.getData();\r\n");
      out.write("\t   var ids=[]; \r\n");
      out.write("\t   for(var i=0;i<chargeData.length;i++){\r\n");
      out.write("\t     ids.push(\"'\"+chargeData[i].planid+\"'\");\r\n");
      out.write("\t  }\r\n");
      out.write("\t  var cflag=true;\r\n");
      out.write("\t  if(ebankid!=\"\"){;}\r\n");
      out.write("\t  param[\"rentplandids\"]=ids.join(\",\");\r\n");
      out.write("\t  param[\"flowunid\"]=flowunid;\r\n");
      out.write("\t  var temptableid=tableid;\r\n");
      out.write("\t  if(ids.length>0){\r\n");
      out.write("\t\t  mini.mask({ el: document.body,cls: 'mini-mask-loading',html:'检查租金...'});\r\n");
      out.write("\t\t  ajaxRequest({\r\n");
      out.write("\t\t\t\turl : getRootPath() + \"/eleasing/getRentCheckInfo.acl\",\r\n");
      out.write("\t\t\t\tmethod : 'POST',\r\n");
      out.write("\t\t\t\tsuccess : function(rs) {\r\n");
      out.write("\t\t\t\t\tvar returnMessage = rs.responseText;\r\n");
      out.write("\t                var checkInfo=eval(\"(\"+returnMessage+\")\");\r\n");
      out.write("\t                if(checkInfo.result==\"0\"){\r\n");
      out.write("\t                       mini.alert(checkInfo.message);\r\n");
      out.write("\t                       cflag= false;\r\n");
      out.write("\t                }else{\r\n");
      out.write("\t                     var allsum=0;\r\n");
      out.write("\t                     var message=[];\r\n");
      out.write("\t                     for(var i=0;i<chargeData.length;i++){\r\n");
      out.write("\t                          allsum=parseFloat(allsum)+parseFloat(chargeData[i].corpus)+parseFloat(chargeData[i].interest)+parseFloat(chargeData[i].penalty);\r\n");
      out.write("\t                          allsum=allsum.toFixed(2);\r\n");
      out.write("\t                          for(var j=0;j<checkInfo.rent.length;j++){\r\n");
      out.write("\t                               if(chargeData[i].planid==checkInfo.rent[j].id){\r\n");
      out.write("\t                                   var tempvalue=parseFloat(checkInfo.rent[j].curcorpusoverage)-parseFloat(chargeData[i].corpus);\r\n");
      out.write("\t                                   tempvalue=tempvalue.toFixed(2); \r\n");
      out.write("\t                            \t   if(parseFloat(tempvalue)<0){\r\n");
      out.write("\t                            \t\t   message.push(\"第\"+chargeData[i].planlist+\"期本金(\"+chargeData[i].corpus+\")大于计划余额(\"+checkInfo.rent[j].curcorpusoverage+\")\");\r\n");
      out.write("\t                                       cflag= false;\r\n");
      out.write("\t                                   }\r\n");
      out.write("\t                            \t   checkInfo.rent[j].curcorpusoverage=tempvalue;\r\n");
      out.write("\t                            \t   tempvalue=parseFloat(checkInfo.rent[j].curinterestoverage)-parseFloat(chargeData[i].interest);\r\n");
      out.write("\t                                   tempvalue=tempvalue.toFixed(2); \r\n");
      out.write("\t \r\n");
      out.write("\t                            \t   if(parseFloat(tempvalue)<0){\r\n");
      out.write("\t                            \t\t   message.push(\"第\"+chargeData[i].planlist+\"期租息(\"+chargeData[i].interest+\")大于计划余额(\"+checkInfo.rent[j].curinterestoverage+\")\");\r\n");
      out.write("\t                                       cflag= false;\r\n");
      out.write("\t                                   }\r\n");
      out.write("\t                            \t   checkInfo.rent[j].curinterestoverage=tempvalue;\r\n");
      out.write("\t                            \t   tempvalue=parseFloat(checkInfo.rent[j].penaltyoverage)-parseFloat(chargeData[i].penalty);\r\n");
      out.write("\t                                   tempvalue=tempvalue.toFixed(2); \r\n");
      out.write("\t                            \t   if(parseFloat(tempvalue)<0){\r\n");
      out.write("\t                            \t\t   message.push(\"第\"+chargeData[i].planlist+\"期罚息(\"+chargeData[i].penalty+\")大于计划余额(\"+checkInfo.rent[j].penaltyoverage+\")\");\r\n");
      out.write("\t                                       cflag= false;\r\n");
      out.write("\t                                   }\r\n");
      out.write("\t                            \t   checkInfo.rent[j].penaltyoverage=tempvalue;\r\n");
      out.write("\t                \r\n");
      out.write("\t                            \t   tempvalue=parseFloat(checkInfo.rent[j].penaltyoverage)-parseFloat(chargeData[i].penaltyadjust);\r\n");
      out.write("\t                                   tempvalue=tempvalue.toFixed(2); \r\n");
      out.write("\t                            \t   if(parseFloat(tempvalue)<0){\r\n");
      out.write("\t                            \t\t   message.push(\"第\"+chargeData[i].planlist+\"期罚息减免(\"+chargeData[i].penaltyadjust+\")大于计划余额(\"+checkInfo.rent[j].penaltyoverage+\")\");\r\n");
      out.write("\t                                       cflag= false;\r\n");
      out.write("\t                                   }\r\n");
      out.write("\t                            \t   checkInfo.rent[j].penaltyoverage=tempvalue;\r\n");
      out.write("\t                               }\r\n");
      out.write("\t                          }\r\n");
      out.write("\t                     }\r\n");
      out.write("\t                     if(checkInfo.ebank.length>0){\r\n");
      out.write("\t                           var mayopemoney=checkInfo.ebank[0].mayopemoney;\r\n");
      out.write("\t                           mayopemoney=parseFloat(mayopemoney);\r\n");
      out.write("\t                           mayopemoney=mayopemoney.toFixed(2);\r\n");
      out.write("\t                           if(allsum>parseFloat(mayopemoney)){\r\n");
      out.write("\t                        \t   message.push(\"本次核销金额\"+allsum+\"大于网银余额\"+mayopemoney);\r\n");
      out.write("\t                        \t   cflag= false;\r\n");
      out.write("\t                           }\r\n");
      out.write("\t                     }\r\n");
      out.write("\t                     if(message.length>0){\r\n");
      out.write("                             mini.alert(message.join(\"<br>\"));\r\n");
      out.write("\t\t                 }\r\n");
      out.write("\t                }\r\n");
      out.write("\t\t\t\t\tmini.unmask(document.body);\r\n");
      out.write("\t\t  },\r\n");
      out.write("\t\t\tasync : false,\r\n");
      out.write("\t\t\tfailure : function(res) {\r\n");
      out.write("\t\t\t  mini.unmask(document.body);\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\tparams :param\r\n");
      out.write("\t\t});\r\n");
      out.write("\t  }else{\r\n");
      out.write("\t     mini.alert(\"请选择本次回笼租金\");\r\n");
      out.write("\t     cflag= false;\r\n");
      out.write("\t  }\t\r\n");
      out.write("\t  return cflag;\r\n");
      out.write("} \r\n");
      out.write("//验证核销不能跳期核，只能按期次向下\r\n");
      out.write("function doCheckRentListContinue(tableid1,tableid2)\r\n");
      out.write("{\r\n");
      out.write("\tvar plantable = mini.get(tableid1); //租金计划数据\r\n");
      out.write("\tvar plandate=mini.clone(plantable.getData());\r\n");
      out.write("\tvar incomeTable=mini.get(tableid2); //本次租金回笼明细数据\r\n");
      out.write("\tvar incometable=mini.clone(incomeTable.getData());\r\n");
      out.write("\tvar temp=0;\r\n");
      out.write("    for(var i=0;i<plandate.length;i++){\r\n");
      out.write("         for( var j=0;j<incometable.length;j++){\r\n");
      out.write("             if(plandate[i].rentlist==incometable[j].planlist){\r\n");
      out.write("                 temp=0;\r\n");
      out.write("                 temp=parseFloat(plandate[i].currentoverage)-parseFloat(incometable[j].rent);\r\n");
      out.write("                 temp=temp.toFixed(2);\r\n");
      out.write("                 plandate[i].currentoverage=temp;\r\n");
      out.write("             }   \r\n");
      out.write("         } \r\n");
      out.write("    }\r\n");
      out.write("    for(var i=0;i<plandate.length-1;i++){\r\n");
      out.write("        var j=i+1;\r\n");
      out.write("        if(plandate[i].currentoverage>0&&plandate[j].currentoverage!=plandate[j].rent){\r\n");
      out.write("        \t mini.alert(\"不能跳过第\"+(i+1)+\"期进行隔期核销，请确认,如需请勾选租金回笼计划中的允许隔期回笼！\");\r\n");
      out.write("             return false;\r\n");
      out.write("        }  \r\n");
      out.write("    }\r\n");
      out.write("\treturn true;\r\n");
      out.write("}\r\n");
      out.write("</script>\r\n");
      out.write("\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
